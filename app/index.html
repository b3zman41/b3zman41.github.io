<html ng-app="nycOpen">
<head>


  <script src="/app/scripts/jquery-2.1.1.js"></script>

  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="/app/bower_components/angular-material/angular-material.min.css">
  <link rel="stylesheet" href="/app/styles/daterangepicker-bs3.css">

  <link rel="stylesheet" href="/app/bower_components/angular-material/themes/indigo-theme.css">

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="//cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">

  <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

  <script src="/app/bower_components/angular/angular.js"></script>
  <script src="/app/bower_components/angular-aria/angular-aria.js"></script>
  <script src="/app/bower_components/angular-animate/angular-animate.js"></script>
  <script src="/app/bower_components/hammerjs/hammer.js"></script>
  <script src="/app/bower_components/angular-material/angular-material.js"></script>

  <script src="//cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>

  <script src="/app/scripts/moment.js"></script>
  <script src="/app/scripts/daterangepicker.js"></script>

  <script src="/app/bower_components/angular-date-range-picker/build/angular-date-range-picker.js"></script>

  <script src="/app/scripts/appController.js"></script>

  <style>

    #communityBoardTable{
      margin-top: 2vh;
    }

    #communityBoardTable th{
      text-align: left;
      font-size: 3vh;

      padding-left: 0;
    }


    #mainTable th{
      border: 2pt solid #eeeeee;

      margin-top: 1.5vh;
    }

    #mainTable th:hover{
      cursor: pointer;
    }

    #mainTable{
      font-size: 1.5vh;
    }

    #queryCard label{
      margin-top: 3vh;
    }

    #paginatorList li:hover{
      cursor: pointer;
    }

    .boardTable{
      margin: 3% 0;
      margin-top: 0 !important;
    }

    .boardTable > div{
      padding: 2%;
    }

    .boardTable > div:first-child{
      padding-left: 0;
    }

    *{
      font-family: 'Roboto Condensed', sans-serif;
    }
  </style>

  <title></title>
</head>
<body>

  <div ng-controller="appController" style="">
    <md-toolbar style="top: 0; background-color: #1A237E">
    <h1 style="padding-left: 1vw;">NYC Open Data Community Board Search Tool</h1>
  </md-toolbar>

  <div layout="row" >

    <div id="queryCard" flex="25" style="height: 75vh; margin-top: 2.5vh;">

      <md-toolbar class="md-whiteframe-z2" style="margin-bottom: -3%; background-color: #3949AB" layout="row" layout-align="space-between center" layout-align="center">
      <span flex style="padding-left: 1vw; font-size: 5vh;" >Search</span>
      <span flex="30" class="md-whiteframe-z1" layout="column" layout-align="space-around" style="height: 45px; text-align: center; border-radius: 3px; background-color: #2095F2; margin-right: 2%;">
        {{dataLength}}
      </span>
    </md-toolbar>

    <md-card class="md-whiteframe-z3" style="font-size: 3vh;">
    <label for="datePicker">Date Range:</label>
    <div class="input-group">
      <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
      <input ng-model="dateRange" type="text" name="reservation" id="datePicker" class="form-control"/>
    </div>

    <div id="communityBoardTable" class="row boardTable">
      <div class="col-sm-4">
        <label class="control-label">Borough</label>
        <select class="form-control" ng-model="boroughSelect" ng-change="updateBoard()">
          <option value=""></option>

          <option value="{{borough}}" ng-repeat="borough in boroughs">
            {{borough}}
          </option>
        </select>
      </div>

      <div class="col-sm-8">
        <label class="control-label">CB Number</label>
        <select class="form-control" ng-model="cbNumberSelect">
          <option value=""></option>

          <option value="{{cbNum}}" ng-repeat="cbNum in cbNums">
            {{cbNum}}
          </option>
        </select>
      </div>
    </div>

    <div class="row boardTable">
      <div class="col-sm-4">
        <td style="padding-left: 0;">
          <label class="control-label" style="margin-top: 0; font-size: 3vh; padding-left: 0;">Agency</label>
          <select class="form-control" style="padding-left: 0;" ng-model="agencySelect">
            <option></option>
            <option value="{{agency}}" ng-repeat="agency in agencies">
              {{agency}}
            </option>
          </select>
        </div>

        <div class="col-sm-8">
          <label class="control-label" style="margin-top: 0; font-size: 3vh; padding-left: 0">Complaint Type</label>
          <select class="form-control" style="padding-left: 0" ng-model="complaintTypeSelect">
            <option></option>
            <option value="{{complaintType}}" ng-repeat="complaintType in complaintTypes">
              {{complaintType}}
            </option>
          </select>
        </div>
      </div>

      <label class="control-label" style="margin-top: 1vh">Incident Address</label>
      <input type="text" ng-model="incidentAddressInput" class="form-control">

      <label class="control-label">Status</label>
      <select class="form-control" ng-model="statusSelect">
        <option></option>
        <option value="{{status}}" ng-repeat="status in statuses">
          {{status}}
        </option>
      </select>

      <div layout="row" layout-align="space-around center" style="margin-top: 3vh;">
        <md-button style="background-color: #5C6BC0" class="md-raised md-primary" ng-click="filterQuery()"><span class="glyphicon glyphicon-filter"></span>Filter</md-button>
        <md-button ng-click="clearFields()" class="md-raised md-warn"><span class="glyphicon glyphicon-trash"></span> Clear</md-button>
      </div>


      <script type="text/javascript">
        $(document).ready(function() {
          $('#datePicker').daterangepicker({});
        });
      </script>

    </md-card>

  </div>

  <div flex="74" layout="column" style="margin-top: 1%;">

    <div layout="row" layout-align="space-between center" style="width: 74vw; margin-bottom: 1%;">
      <md-button style="background-color: #7986CB; color: white; margin-left: 1vw;" class="md-raised" ng-click="exportData()"><span class="glyphicon glyphicon-export"></span> Export Data</md-button>

      <div style="text-align: center;">
        <ul style="visibility: hidden; margin: 0;" id="paginatorList" class="pagination">
        </ul>
      </div>

      <md-button style="background-color: #5C6BC0; color: white; margin-right: 1vw;" class="md-raised" ng-click="updateQuery()"><span class="glyphicon glyphicon-refresh"></span> Refresh</md-button>
    </div>

    <md-card id="tableCard" flex="74" style="margin-top: -.4%;">

    <div layout="row" layout-align="space-around center">
      <md-progress-circular md-mode="indeterminate" id="loadingIcon" style="display: none;"></md-progress-circular>
    </div>

    <div style="overflow: auto; max-height: 75vh;">
      <table id="mainTable" class="table table-striped table-condensed mainTable">

        <thead>
          <tr>
            <th tdLink="created_date">Created Date<md-tooltip>Click To Sort</md-tooltip></th>
            <th tdLink="agency">Agency<md-tooltip>Click To Sort</md-tooltip></th>
            <th tdLink="complaint_type">Complaint Type<md-tooltip>Click To Sort</md-tooltip></th>
            <th tdLink="descriptor">Complaint Description<md-tooltip>Click To Sort</md-tooltip></th>
            <th tdLink="incident_address">Incident Address<md-tooltip>Click To Sort</md-tooltip></th>
            <th tdLink="borough">Borough<md-tooltip>Click To Sort</md-tooltip></th>
            <th style="text-align: center;" tdLink="incident_zip">Incident Zip<md-tooltip>Click To Sort</md-tooltip></th>
            <th tdLink="community_board">Community Board<md-tooltip>Click To Sort</md-tooltip></th>
            <th tdLink="status">Status<md-tooltip>Click To Sort</md-tooltip></th>
          </tr>
        </thead>


        <tbody style="overflow: auto;">
          <tr ng-repeat="row in resultRows">
            <td>{{row.createdDate}}</td>
            <td>{{row.agency}}</td>
            <td>{{row.complaintType}}</td>
            <td>{{row.descriptor}}</td>
            <td>{{row.incidentAddress}}</td>
            <td>{{row.borough}}</td>
            <td style="text-align: center;">{{row.incidentZip}}</td>
            <td>{{row.communityBoard}}</td>
            <td>{{row.status}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </md-card>

</div>

</div>
</div>

</body>
</html>
